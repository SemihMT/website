<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Voice of the Ocean</title>
    <link rel="stylesheet" href="../styles.css">
    <link rel="icon" type="image/x-icon" href="../assets/icon/favicon.ico">
    <link rel="stylesheet" href="../assets/highlight/styles/agate.css">
    <script src="../assets/highlight/highlight.min.js"></script>

</head>

<body>

    <!-- Header Section -->
    <header>
        <div onclick="location.href='../index.html';" style="cursor: pointer;">
            <h1>Semih's Portfolio</h1>
        </div>
        <nav>
            <ul>
                <li><a href="../index.html#projects">Projects</a></li>
                <li><a href="../blog.html">Blog</a></li>
                <li><a href="../assets/resume/SemihMehmetTeke_Resume_Public.pdf" target="_blank"
                        title="Resume">Resume</a></li>
                <li><a href="../index.html#contact">Contact</a></li>
            </ul>
        </nav>
    </header>

    <!-- Project Details Section -->
    <section id="project-details">
        <div class="project-header">
            <h2>Voice of the Ocean</h2>
        </div>
        <hr>
        <div class="project-details-image">
            <img src="../assets/images/VOTO/YT_Banner.png" alt="Main Screenshot of the Project">
        </div>

        <div class="project-details-content">
            <div class="project-details-text">
                <h3>Overview</h3>
                <p>
                    This is our group project game we're currently working on. It's a single player action-adventure
                    game
                    where the player interacts with the world by singing melodies using their real-world voice.
                </p>
                <p>
                    We're with 6, our group consists of:
                <ul>
                    <li>1 team lead & game designer</li>
                    <li>1 sound developer & programmer</li>
                    <li>2 artists</li>
                    <li>2 programmers</li>
                </ul>
                </p>
                <p>
                    We also have the privilege of working with
                <ul>
                    <li>a composer from the conservatory of Ghent who will be writing an original soundtrack</li>
                    <li>and 2 marketing students from Thomas Moore University who will be managing our social media</li>
                </ul>
                </p>
                <p>
                    I am one of the programmers and am mainly tasked with creating the NPC AI. I've also worked on the
                    UI that's used when the player builds the melody
                    they'll sing. Besides the AI, I'm also responsible for the NPC movement and getting that to look
                    realistic. Our NPC's are
                    fishes, and our goal is to have them feel lifelike.
                </p>
                <h3>Features</h3>
                <ul>
                    <li> <b>A compelling story:</b> Find yourself in a post-humanity, underwater world and discover your
                        surroundings.</li>
                    <li> <b>Music & Sound:</b> Enjoy an original soundtrack specifically crafted by our team member from
                        the conservatory of Ghent.</li>
                    <li> <b>Sing and Interact:</b> Define your melodies and sing them to interact with your
                        surroundings.</li>
                </ul>
    </section>
    <section id="code-snippets">
        <h2>Code</h2>
        <div class="code-card">
            <div class="code-card-header" onclick="toggleCodeSnippet(this)">
                <h3>Voice of the Ocean</h3>
                <span class="toggle-icon">+</span>
            </div>
            <div class="code-content" style="display: none;">
                <p>Relay the EQS result to the pawn's movement component.</p>
                <div class="code-block">
                    <div class="code-block-header">
                        <span>A custom Behavior Tree Task</span>
                        <span class="toggle-icon">+</span>
                    </div>
                    <pre><code class="language-cpp">
EBTNodeResult::Type URelayTargetLocationTask::ExecuteTask(UBehaviorTreeComponent&amp; OwnerComp, uint8* NodeMemory)
{
	FVector targetLocation = OwnerComp.GetBlackboardComponent()-&gt;GetValueAsVector(&quot;TargetLocation&quot;);
	const AAIController* ownerController = OwnerComp.GetAIOwner();

	if (const auto ownerPawn = ownerController-&gt;GetPawn())
	{
		if (const auto movementCP = ownerPawn-&gt;FindComponentByClass&lt;USharkMovementCP&gt;())
		{
			if (!movementCP-&gt;TargetActor)
			{
				movementCP-&gt;SetTargetLocation(targetLocation);
			}
		}
	}
	else
	{
		UE_LOG(LogTemp, Warning, TEXT(&quot;RelayTargetLocationTask: OwnerPawn was NULL&quot;));
		return EBTNodeResult::Failed;
	}

	// Return InProgress so TickTask will continue to check until the target is reached
	return EBTNodeResult::InProgress;
}

void URelayTargetLocationTask::TickTask(UBehaviorTreeComponent&amp; OwnerComp, uint8* NodeMemory, float DeltaSeconds)
{
	const AAIController* ownerController = OwnerComp.GetAIOwner();
	if (const auto ownerPawn = ownerController-&gt;GetPawn())
	{
		if (const auto movementCP = ownerPawn-&gt;FindComponentByClass&lt;USharkMovementCP&gt;())
		{
			if (movementCP-&gt;HasReachedTarget)
			{
				FinishLatentTask(OwnerComp, EBTNodeResult::Succeeded);
				return;
			}
		}
	}
	Super::TickTask(OwnerComp, NodeMemory, DeltaSeconds);
}
                    </code></pre>
                </div>
                <p>Reworked the existing Grid Point Environment Query Generator to generate a grid in 3D</p>
                <div class="code-block">
                    <div class="code-block-header">
                        <span>3D Grid Generator</span>
                        <span class="toggle-icon">+</span>
                    </div>
                    <pre><code class="language-cpp">
void UEQG_3DGrid::GenerateItems(FEnvQueryInstance&amp; QueryInstance) const
{
	UObject* BindOwner = QueryInstance.Owner.Get();
	GridSize.BindData(BindOwner, QueryInstance.QueryID);
	SpaceBetween.BindData(BindOwner, QueryInstance.QueryID);

	float RadiusValue = GridSize.GetValue();
	float DensityValue = SpaceBetween.GetValue();

	const int32 ItemCount = FPlatformMath::TruncToInt((RadiusValue * 2.0f / DensityValue) + 1);
	const int32 ItemCountHalf = ItemCount / 2;

	TArray&lt;FVector&gt; ContextLocations;
	QueryInstance.PrepareContext(GenerateAround, ContextLocations);

	TArray&lt;FNavLocation&gt; GridPoints;
	GridPoints.Reserve(ItemCount * ItemCount * ContextLocations.Num());

	for (int32 ContextIndex = 0; ContextIndex &lt; ContextLocations.Num(); ContextIndex++)
	{
		for (int32 IndexX = 0; IndexX &lt; ItemCount; ++IndexX)
		{
			for (int32 IndexY = 0; IndexY &lt; ItemCount; ++IndexY)
			{
				for (int32 IndexZ = 0; IndexZ &lt; ItemCount; ++IndexZ)
				{
					const FNavLocation TestPoint = FNavLocation(
						ContextLocations[ContextIndex] - FVector(
							DensityValue * (IndexX - ItemCountHalf),
							DensityValue * (IndexY - ItemCountHalf),
							DensityValue * (IndexZ - ItemCountHalf) 
						)
					);
					GridPoints.Add(TestPoint);
				}
			}
		}
	}

	ProjectAndFilterNavPoints(GridPoints, QueryInstance);
	StoreNavPoints(GridPoints, QueryInstance);
}
                                </code></pre>
                </div>

            </div>
        </div>
    </section>
    <script>
        function toggleCodeSnippet(element) {
            const codeContent = element.nextElementSibling;
            const toggleIcon = element.querySelector('.toggle-icon');

            if (codeContent.style.display === "none") {
                codeContent.style.display = "block";
                toggleIcon.textContent = "-";
            } else {
                codeContent.style.display = "none";
                toggleIcon.textContent = "+";
            }
        }

        const allCodeBlockHeader = document.querySelectorAll('.code-block-header');
        allCodeBlockHeader.forEach(element => {
            element.addEventListener('click', function () {
                const codeBlock = this.parentElement;
                const toggleIcon = this.querySelector('.toggle-icon');

                if (codeBlock.classList.contains('collapsed')) {
                    codeBlock.classList.remove('collapsed');
                    toggleIcon.textContent = '-';
                } else {
                    codeBlock.classList.add('collapsed');
                    toggleIcon.textContent = '+';
                }
            });
        });
        const allCodeCardHeader = document.querySelectorAll('.code-card-header');
        allCodeCardHeader.forEach(element => {
            element.addEventListener('click', function () {
                const codeBlock = document.querySelector('.code-card');
                if (codeBlock.classList.contains('collapsed')) {
                    codeBlock.classList.remove('collapsed');
                } else {
                    codeBlock.classList.add('collapsed');
                }
            });
        });

        // Initialize as collapsed
        document.addEventListener('DOMContentLoaded', function () {
            const codeBlock = document.querySelectorAll('.code-block');
            codeBlock.forEach(element => {
                element.classList.add('collapsed');
            });
            //codeBlock.classList.add('collapsed');
            const codeCard = document.querySelectorAll('.code-card');
            codeCard.forEach(element => {
                element.classList.add('collapsed');
            });
            //codeCard.classList.add('collapsed');

        });
    </script>
    <section>
        <h3>Technologies Used</h3>
        <div class="tags">
            <div class="tag" style="background-color: #6488bc">
                <span>C++</span>
            </div>
            <div class="tag" style="background-color: #b96d26;">
                <span>UE5</span>
            </div>
        </div>
        </div>

        </div>

        <!-- Additional Screenshots Section -->
        <div class="project-screenshots">
            <h3>Screenshots</h3>
            <div id="project-grid">
                <div class="project">
                    <video preload="none" autoplay loop muted playsinline>
                    <source src="../assets/images/VOTO/EQSDebug.webm" type="video/webm">
                    </video>
                    <div class="caption">WIP shot of setting up the EQS system</div>
                </div>
                <div class="project">
                    <video preload="none" autoplay loop muted playsinline width="100%" height="auto">
                        <source src="../assets/images/VOTO/ArcCalculation.webm" type="video/webm"> 
                    </video>
                    <div class="caption">Visualizing the arc calculation math using Geogebra</div>
                </div>
                <div class="project">
                    <video preload="none" autoplay loop muted playsinline>
                        <source src="../assets/images/VOTO/SharkWIP.webm" type="video/webm">
                    </video>
                    <div class="caption">The arc calculations applied to the shark NPC</div>
                </div>
            </div>
        </div>

    </section>

    <!-- Footer Section -->
    <footer>
        <p>&copy; 2024 Semih. All rights reserved.</p>
    </footer>
    <script src="../script.js"></script>

    <script>hljs.highlightAll();</script>

</body>

</html>
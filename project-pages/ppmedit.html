<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PPMEdit</title>
    <link rel="stylesheet" href="../styles.css">
    <link rel="icon" type="image/x-icon" href="../assets/icon/favicon.ico"><link rel="stylesheet" href="../assets/highlight/styles/agate.css">
    <script src="../assets/highlight/highlight.min.js"></script>

</head>

<body>
    <!-- Header Section -->
    <header>
        <div onclick="location.href='../index.html';" style="cursor: pointer;">
            <h1>Semih's Portfolio</h1>
        </div>
         <nav>
            <ul>
                <li><a href="../index.html#projects">Projects</a></li>
                <li><a href="../blog.html">Blog</a></li>
                <li><a href="../assets/resume/SemihMehmetTeke_Resume_Public.pdf" target="_blank"
                        title="Resume">Resume</a></li>
                <li><a href="../index.html#contact">Contact</a></li>
            </ul>
        </nav>
    </header>

    <!-- Project Details Section -->
    <section id="project-details">
        <div class="project-header">
            <h2>PPMEdit</h2>
            <a href="https://github.com/SemihMT/PPMEdit" target="_blank" class="github-link">
                <img src="https://upload.wikimedia.org/wikipedia/commons/9/91/Octicons-mark-github.svg"
                    alt="GitHub Repository" width="40" height="40">
            </a>
        </div>
        <hr>

        <div class="project-details-image">
            <video preload="none" autoplay loop muted playsinline>
                <source src="../assets/images/PPMEdit/Metadata.webm" type="video/webm">
            </video>
        </div>

        <div class="project-details-content">
            <div class="project-details-text">
                <h3>Overview</h3>
                <p>
                    PPMEdit is a Python-based GUI tool I developed using the Tkinter library.
                    It serves as a PPM file editor, allowing users to create and edit 32x26 pixel images, specifically
                    designed for use with the <a href="./p4engine.html">P4Engine and the BubbleBobble game</a>.
                    In addition to basic pixel manipulation, PPMEdit also supports adding metadata to individual pixels,
                    allowing me to pack all the necessary level information in one file.
                </p>
                <h3>Features</h3>
                <h4>Canvas and Pixel Editing</h4>
                <ul>
                    <li><strong>32x26 Pixel Canvas</strong>: This is the level layout that's used in BubbleBobble, each
                        pixel is a tile in-game.</li>
                    <li><strong>Color Selection</strong>: Choose from a palette of colors to paint individual pixels on
                        the canvas.</li>
                </ul>
                <ul>
                    <li><strong>Pixel Painting and Erasing</strong>: Easily paint pixels with the selected color or
                        erase them to revert to the blank state.</li>
                </ul>
                <h4>Metadata Management</h4>
                <ul>
                    <li><strong>Add & Modify Metadata</strong>: Assign metadata to each pixel. Hovering over a pixel
                        will show a handy tooltip with any metadata that's associated with the pixel. This metadata can
                        include information such as tile type, special properties, or other relevant data, as long as
                        it's representable in string format.</li>
                </ul>
                <ul>
                    <li><strong>Metadata Storage</strong>: Metadata is stored alongside the pixel data, ensuring that
                        each tile's properties are preserved when saving and loading PPM files.</li>
                </ul>

                <h4>File Management</h4>
                <ul>
                    <li><strong>Save PPM Files</strong>: Save your artwork and metadata as a PPM file, compatible with
                        the P4Engine and BubbleBobble game.</li>
                    <li><strong>Load PPM Files</strong>: Open and edit existing PPM files, allowing for iterative design
                        and refinement of game levels.</li>
                </ul>
            </section>
            <section id="code-snippets">
                <h2>Code</h2>
                <div class="code-card">
                    <div class="code-card-header" onclick="toggleCodeSnippet(this)">
                        <h3>PPM Editor</h3>
                        <span class="toggle-icon">+</span>
                    </div>
                    <div class="code-content" style="display: none;">
                        <p>Loading a pre-existing PPM file for further edit:</p>
                        <div class="code-block">
                            <div class="code-block-header">
                                <span>PPM file loading</span>
                                <span class="toggle-icon">+</span>
                            </div>
                            <pre><code class="language-python">
def open_ppm(self):
    file_path = filedialog.askopenfilename(filetypes=[("PPM files", "*.ppm")])
    if not file_path:
        return

    with open(file_path, 'rb') as f:
        ppm_type = f.readline().strip()
        if ppm_type not in [b"P3", b"P6"]:
            messagebox.showerror("Error", "Invalid PPM file.")
            return

        metadata = {}
        dimensions = f.readline().strip()
        while dimensions.startswith(b"#"):
            if dimensions.startswith(b"# Metadata:"):
                parts = dimensions.split(b":", 1)[1].strip().split(b" ", 2)
                if len(parts) == 3:
                    x_str = parts[0].split(b",")[0].lstrip(b"(")
                    y_str = parts[1].rstrip(b")")
                    try:
                        x, y = int(x_str), int(y_str)
                        comment = parts[2].decode('utf-8')
                        metadata[(x, y)] = comment
                    except ValueError:
                        pass
            dimensions = f.readline().strip()

        width, height = map(int, dimensions.split())
        max_color = int(f.readline().strip())

        if self.width != width or self.height != height:
            messagebox.showerror("Error", "Dimensions of the loaded PPM file do not match the current canvas size.")
            return
    
        if ppm_type == b"P3":
            pixel_data = f.read().decode('utf-8').split()
            index = 0
            for y in range(self.height):
                for x in range(self.width):
                    r, g, b = map(int, pixel_data[index:index+3])
                    index += 3
                    color = f"#{r:02x}{g:02x}{b:02x}"
                    self.canvas.itemconfig(self.grid[y][x], fill=color)
        else:  # P6
            pixels = f.read(self.width * self.height * 3)
            index = 0
            for y in range(self.height):
                for x in range(self.width):
                    r, g, b = pixels[index:index+3]
                    index += 3
                    color = f"#{r:02x}{g:02x}{b:02x}"
                    self.canvas.itemconfig(self.grid[y][x], fill=color)
                    

        self.metadata = metadata
        print(metadata)
                            </code></pre>
                        </div>
                    </div>
                </div>
            </section>
            <script>
                function toggleCodeSnippet(element) {
                    const codeContent = element.nextElementSibling;
                    const toggleIcon = element.querySelector('.toggle-icon');
        
                    if (codeContent.style.display === "none") {
                        codeContent.style.display = "block";
                        toggleIcon.textContent = "-";
                    } else {
                        codeContent.style.display = "none";
                        toggleIcon.textContent = "+";
                    }
                }
        
                const allCodeBlockHeader = document.querySelectorAll('.code-block-header');
                allCodeBlockHeader.forEach(element => {
                    element.addEventListener('click', function () {
                    const codeBlock = this.parentElement;
                    const toggleIcon = this.querySelector('.toggle-icon');
        
                    if (codeBlock.classList.contains('collapsed')) {
                        codeBlock.classList.remove('collapsed');
                        toggleIcon.textContent = '-';
                    } else {
                        codeBlock.classList.add('collapsed');
                        toggleIcon.textContent = '+';
                    }
                });
                });
                const allCodeCardHeader = document.querySelectorAll('.code-card-header');
                allCodeCardHeader.forEach(element => {
                    element.addEventListener('click', function () {
                    const codeBlock =  document.querySelector('.code-card');
                    if (codeBlock.classList.contains('collapsed')) {
                        codeBlock.classList.remove('collapsed');
                    } else {
                        codeBlock.classList.add('collapsed');
                    }
                });
                });
                
                // Initialize as collapsed
                document.addEventListener('DOMContentLoaded', function () {
                    const codeBlock = document.querySelectorAll('.code-block');
                    codeBlock.forEach(element => {
                        element.classList.add('collapsed');
                    });
                    //codeBlock.classList.add('collapsed');
                    const codeCard = document.querySelectorAll('.code-card');
                    codeCard.forEach(element => {
                        element.classList.add('collapsed');
                    });
                    //codeCard.classList.add('collapsed');
        
                });
            </script>
            <section>
                <h3>Technologies Used</h3>
                <div class="tags">
                    <div class="tag" style="background-color: #2b5174">
                        <span>Python</span>
                    </div>
                </div>
            </div>

        </div>

        <!-- Additional Screenshots Section -->
        <div class="project-screenshots">
            <h3>Screenshots</h3>
            <div id="project-grid">
                <div class="project">
                    <video preload="none" autoplay loop muted playsinline>
                        <source src="../assets/images/PPMEdit/ColorPicker.webm" type="video/webm">
                    </video>
                    <div class="caption">Color Selection Interface</div>
                </div>
                <div class="project">
                    <video preload="none" autoplay loop muted playsinline>
                        <source src="../assets/images/PPMEdit/Drawing.webm" type="video/webm">
                    </video>
                    <div class="caption">Pixel Painting Tool</div>
                </div>
                <div class="project">
                    <video preload="none" autoplay loop muted playsinline>
                        <source src="../assets/images/PPMEdit/Erasing.webm" type="video/webm">
                    </video>
                    <div class="caption">Pixel Erasing Tool</div>
                </div>
                <div class="project">
                    <video preload="none" autoplay loop muted playsinline>
                        <source src="../assets/images/PPMEdit/Metadata.webm" type="video/webm">
                    </video>
                    <div class="caption">Metadata Management Tool</div>
                </div>
                <!-- Add more screenshots as needed -->
            </div>
        </div>


    </section>

    <!-- Footer Section -->
    <footer>
        <p>&copy; 2024 Semih. All rights reserved.</p>
    </footer>
<script src="../script.js"></script>

    <script>hljs.highlightAll();</script>

</body>

</html>